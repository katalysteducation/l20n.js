<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

# DocumentLocalization

**Extends DOMLocalization**

The `DocumentLocalization` class localizes DOM documents.

A sublcass of `DOMLocalization`, it implements methods for observing DOM
trees with a `MutationObserver`.  It can delegate the translation of DOM
elements marked with `data-l10n-with` to other named `DOMLocalizations`.

Each `document` will have its corresponding `DocumentLocalization` instance
created automatically on startup, as `document.l10n`.

## constructor

**Parameters**

-   `requestBundles`  
-   `createContext`  

Returns **[DocumentLocalization](#documentlocalization)** 

## requestLanguages

Trigger the language negotation process for this `DocumentLocalization`
and any `DOMLocalization` objects which it can delegate to.

Returns a promise which resolves to an array of arrays of negotiated
languages for each `Localization` available in the current document.

```javascript
document.l10n.requestLanguages(['de-DE', 'de', 'en-US']);
```

**Parameters**

-   `requestedLangs` **[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)>** array of requested languages

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)>>>** 

## translateDocument

Triggers translation of all roots associated with this
`DocumentLocalization` and any `DOMLocalization` objects which it can
delegate to.

Returns a `Promise` which is resolved once all translations are
completed.

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** 

## translateFragment

Translate a DOM element or fragment asynchronously using this
`DocumentLocalization` and any `DOMLocalization` objects which it can
delegate to.

Manually trigger the translation (or re-translation) of a DOM fragment.
Use the `data-l10n-id` and `data-l10n-args` attributes to mark up the DOM
with information about which translations to use.  Only elements with
`data-l10n-with` attribute matching this `DOMLocalization`'s name will be
translated.

If `frag` or its descendants use `data-l10n-with`, the specific named
`DOMLocalization` will be used to translate it.  As a special case,
elements without `data-l10n-with` will be localized using this
`DocumentLocalization` (as if they had `data-l10n-with="main"`).

Returns a `Promise` that gets resolved once the translation is complete.

**Parameters**

-   `frag` **DOMFragment** Element or DocumentFragment to be translated

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** 

## translateElement

Translate a single DOM element asynchronously using this
`DocumentLocalization` or any `DOMLocalization` objects which it can
delegate to.

If `element` uses `data-l10n-with`, the specific named `DOMLocalization`
will be used to translate it.  As a special case, an element without
`data-l10n-with` will be localized using this `DocumentLocalization` (as
if it had `data-l10n-with="main"`).

Returns a `Promise` that gets resolved once the translation is complete.

**Parameters**

-   `element` **[Element](https://developer.mozilla.org/en-US/docs/Web/API/Element)** HTML element to be translated

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** 

# DOMLocalization

**Extends Localization**

The `DOMLocalization` class localizes DOM trees.

## constructor

**Parameters**

-   `requestBundles` **[Function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function)** 
-   `createContext` **[Function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function)** 
-   `name` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 
-   `observer` **\[[DocumentLocalization](#documentlocalization)]** 

Returns **[DOMLocalization](#domlocalization)** 

## requestLanguages

Trigger the language negotation process with an array of language codes.
Returns a promise with the negotiated array of language objects as above.

```javascript
localization.requestLanguages(['de-DE', 'de', 'en-US']);
```

**Parameters**

-   `requestedLangs` **[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)>** array of requested languages

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)>>** 

## setAttributes

Set the `data-l10n-id` and `data-l10n-args` attributes on DOM elements.
L20n makes use of mutation observers to detect changes to `data-l10n-*`
attributes and translate elements asynchronously.  `setAttributes` is
a convenience method which allows to translate DOM elements declaratively.

You should always prefer to use `data-l10n-id` on elements (statically in
HTML or dynamically via `setAttributes`) over manually retrieving
translations with `format`.  The use of attributes ensures that the
elements can be retranslated when the user changes their language
preferences.

```javascript
localization.setAttributes(
  document.querySelector('#welcome'), 'hello', { who: 'world' }
);
```

This will set the following attributes on the `#welcome` element.  L20n's
MutationObserver will pick up this change and will localize the element
asynchronously.

```html
<p id='welcome'
  data-l10n-id='hello'
  data-l10n-args='{"who": "world"}'>
</p>
```

**Parameters**

-   `element` **[Element](https://developer.mozilla.org/en-US/docs/Web/API/Element)** Element to set attributes on
-   `id` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** l10n-id string
-   `args` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)&lt;[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String), [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)>** KVP list of l10n arguments```

    ```

## getAttributes

Get the `data-l10n-*` attributes from DOM elements.

```javascript
localization.getAttributes(
  document.querySelector('#welcome')
);
// -> { id: 'hello', args: { who: 'world' } }
```

**Parameters**

-   `element` **[Element](https://developer.mozilla.org/en-US/docs/Web/API/Element)** HTML element

Returns **{id: [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String), args: [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)}** 

## connectRoot

Add `root` to the list of roots managed by this `DOMLocalization`.

Additionally, if this `DOMLocalization` has an observer, start observing
`root` in order to translate mutations in it.

**Parameters**

-   `root` **[Element](https://developer.mozilla.org/en-US/docs/Web/API/Element)** Root to observe.

## disconnectRoot

Remove `root` from the list of roots managed by this `DOMLocalization`.

Additionally, if this `DOMLocalization` has an observer, stop observing
`root`.

Returns `true` if the root was the last one managed by this
`DOMLocalization`.

**Parameters**

-   `root` **[Element](https://developer.mozilla.org/en-US/docs/Web/API/Element)** Root to disconnect.

Returns **[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** 

## translateRoots

Translate all roots associated with this `DOMLocalization`.

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** 

## translateRoot

Translate `root`.

This is similar to `translateFragment` but it will also set the `lang` and
`dir` attribute on `root`.  In XUL documents, the anonymous content
attached to `root` will also be translated.

**Parameters**

-   `root`  

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** 

## translateFragment

Translate a DOM element or fragment asynchronously.

Manually trigger the translation (or re-translation) of a DOM fragment.
Use the `data-l10n-id` and `data-l10n-args` attributes to mark up the DOM
with information about which translations to use.  Only elements with
`data-l10n-with` attribute matching this `DOMLocalization`'s name will be
translated.

Returns a `Promise` that gets resolved once the translation is complete.

**Parameters**

-   `frag` **DOMFragment** DOMFragment to be translated

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** 

## translateElement

Translate a single DOM element asynchronously.

The element's `data-l10n-with` must match this `DOMLocalization`'s name.

Returns a `Promise` that gets resolved once the translation is complete.

**Parameters**

-   `element` **[Element](https://developer.mozilla.org/en-US/docs/Web/API/Element)** HTML element to be translated

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** 
